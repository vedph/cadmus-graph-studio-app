<form [formGroup]="form" (submit)="transform()">
  <div id="container">
    <!-- jmes -->
    <div id="expr">
      <mat-form-field class="long-text">
        <mat-label>jmes</mat-label>
        <input matInput [formControl]="jmes" />
        <mat-error
          *ngIf="$any(jmes).errors?.required && (jmes.dirty || jmes.touched)"
          >JMES required</mat-error
        >
        <mat-error
          *ngIf="$any(jmes).errors?.maxLength && (jmes.dirty || jmes.touched)"
          >JMES too long</mat-error
        >
      </mat-form-field>
      <button
        type="submit"
        mat-icon-button
        color="primary"
        [disabled]="form.invalid || busy"
      >
        <mat-icon>play_circle</mat-icon>
      </button>
    </div>

    <!-- input -->
    <div id="input">
      <div>
        <mat-form-field class="long-text">
          <mat-label>input</mat-label>
          <textarea rows="3" matInput [formControl]="input"></textarea>
          <mat-error
            *ngIf="
              $any(input).errors?.required && (input.dirty || input.touched)
            "
            >input required</mat-error
          >
          <mat-error
            *ngIf="
              $any(input).errors?.maxLength && (input.dirty || input.touched)
            "
            >input too long</mat-error
          >
        </mat-form-field>
      </div>
      <!-- samples -->
      <div>
        <cadmus-cached-text-picker
          [text]="input.value"
          (textPick)="onTextPick($event)"
          cacheKey="jmes"
        ></cadmus-cached-text-picker>
      </div>
    </div>

    <!-- output -->
    <div id="output">
      <mat-form-field class="long-text">
        <mat-label>output</mat-label>
        <textarea rows="3" matInput [formControl]="output"></textarea>
      </mat-form-field>
    </div>
  </div>
</form>
